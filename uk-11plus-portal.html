<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ElevenPlus Academy â€” UK 11+ Exam Prep</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --navy: #0d1f3c;
    --royal: #1a3a6b;
    --gold: #c9973a;
    --gold-light: #f0c96e;
    --cream: #faf8f3;
    --soft: #f0ede5;
    --muted: #8a8070;
    --text: #1c1a16;
    --correct: #2d7a4f;
    --wrong: #b83232;
    --correct-bg: #edf7f1;
    --wrong-bg: #fdeaea;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--cream);
    color: var(--text);
    min-height: 100vh;
  }

  /* â”€â”€ HEADER â”€â”€ */
  header {
    background: var(--navy);
    padding: 0 40px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 72px;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 2px 20px rgba(0,0,0,.3);
  }

  .logo {
    font-family: 'Playfair Display', serif;
    color: var(--gold-light);
    font-size: 1.5rem;
    font-weight: 700;
    letter-spacing: .5px;
  }
  .logo span { color: white; }

  .header-badge {
    background: var(--gold);
    color: var(--navy);
    font-size: .72rem;
    font-weight: 600;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    padding: 6px 14px;
    border-radius: 20px;
  }

  /* â”€â”€ HERO â”€â”€ */
  .hero {
    background: linear-gradient(135deg, var(--navy) 0%, var(--royal) 60%, #2a4a7f 100%);
    color: white;
    padding: 70px 40px 80px;
    text-align: center;
    position: relative;
    overflow: hidden;
  }

  .hero::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: radial-gradient(circle at 20% 80%, rgba(201,151,58,.15) 0%, transparent 50%),
                      radial-gradient(circle at 80% 20%, rgba(201,151,58,.1) 0%, transparent 50%);
  }

  .hero-tag {
    display: inline-block;
    border: 1px solid rgba(201,151,58,.5);
    color: var(--gold-light);
    font-size: .75rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    padding: 6px 18px;
    border-radius: 20px;
    margin-bottom: 22px;
  }

  .hero h1 {
    font-family: 'Playfair Display', serif;
    font-size: clamp(2rem, 5vw, 3.4rem);
    font-weight: 900;
    line-height: 1.15;
    margin-bottom: 16px;
    position: relative;
  }

  .hero h1 em {
    font-style: normal;
    color: var(--gold-light);
  }

  .hero p {
    font-size: 1.05rem;
    color: rgba(255,255,255,.75);
    max-width: 560px;
    margin: 0 auto 36px;
    line-height: 1.7;
    position: relative;
  }

  .hero-stats {
    display: flex;
    justify-content: center;
    gap: 48px;
    position: relative;
  }

  .stat { text-align: center; }
  .stat-num {
    font-family: 'Playfair Display', serif;
    font-size: 2rem;
    font-weight: 700;
    color: var(--gold-light);
  }
  .stat-label { font-size: .8rem; color: rgba(255,255,255,.6); margin-top: 2px; }

  /* â”€â”€ MAIN LAYOUT â”€â”€ */
  .main {
    max-width: 900px;
    margin: 0 auto;
    padding: 50px 24px 80px;
  }

  /* â”€â”€ SECTION TITLE â”€â”€ */
  .section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 32px;
    flex-wrap: wrap;
    gap: 16px;
  }

  .section-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.7rem;
    font-weight: 700;
    color: var(--navy);
  }
  .section-title span {
    display: block;
    font-family: 'DM Sans', sans-serif;
    font-size: .8rem;
    font-weight: 500;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 4px;
  }

  /* â”€â”€ DOWNLOAD BUTTON â”€â”€ */
  .btn-download {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    background: var(--navy);
    color: white;
    border: none;
    padding: 13px 24px;
    border-radius: 8px;
    font-family: 'DM Sans', sans-serif;
    font-size: .9rem;
    font-weight: 600;
    cursor: pointer;
    text-decoration: none;
    transition: background .2s, transform .15s;
  }
  .btn-download:hover { background: var(--royal); transform: translateY(-1px); }

  .btn-download svg { width: 18px; height: 18px; }

  /* â”€â”€ PROGRESS BAR â”€â”€ */
  .progress-bar-wrap {
    background: var(--soft);
    border-radius: 6px;
    height: 8px;
    margin-bottom: 32px;
    overflow: hidden;
  }
  .progress-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--gold), var(--gold-light));
    border-radius: 6px;
    transition: width .4s ease;
  }
  .progress-label {
    font-size: .8rem;
    color: var(--muted);
    margin-bottom: 8px;
    font-weight: 500;
  }

  /* â”€â”€ QUESTION CARD â”€â”€ */
  .question-card {
    background: white;
    border-radius: 16px;
    padding: 36px;
    margin-bottom: 20px;
    box-shadow: 0 2px 16px rgba(0,0,0,.06);
    border: 1.5px solid transparent;
    transition: border-color .3s, box-shadow .3s;
    animation: fadeUp .4s ease both;
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(16px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  .question-card.answered-correct { border-color: var(--correct); box-shadow: 0 2px 16px rgba(45,122,79,.12); }
  .question-card.answered-wrong   { border-color: var(--wrong);   box-shadow: 0 2px 16px rgba(184,50,50,.12); }

  .q-header {
    display: flex;
    align-items: flex-start;
    gap: 16px;
    margin-bottom: 22px;
  }

  .q-num {
    background: var(--navy);
    color: var(--gold-light);
    font-family: 'Playfair Display', serif;
    font-size: 1rem;
    font-weight: 700;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    margin-top: 2px;
  }

  .q-category {
    font-size: .72rem;
    font-weight: 600;
    letter-spacing: 1.2px;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 6px;
  }

  .q-text {
    font-size: 1.05rem;
    font-weight: 500;
    line-height: 1.6;
    color: var(--navy);
  }

  /* â”€â”€ OPTIONS â”€â”€ */
  .options {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    margin-top: 4px;
  }

  @media(max-width: 580px) { .options { grid-template-columns: 1fr; } }

  .option {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 13px 16px;
    border: 1.5px solid #e5e0d5;
    border-radius: 10px;
    cursor: pointer;
    transition: border-color .2s, background .2s, transform .1s;
    font-size: .95rem;
    font-weight: 400;
    color: var(--text);
    background: var(--cream);
    user-select: none;
  }
  .option:hover:not(.disabled) { border-color: var(--gold); background: #fdf9f1; transform: translateX(2px); }
  .option.selected-correct { background: var(--correct-bg); border-color: var(--correct); color: var(--correct); font-weight: 600; }
  .option.selected-wrong   { background: var(--wrong-bg);   border-color: var(--wrong);   color: var(--wrong);   font-weight: 600; }
  .option.show-correct     { background: var(--correct-bg); border-color: var(--correct); color: var(--correct); font-weight: 600; }
  .option.disabled         { cursor: default; }

  .opt-letter {
    width: 26px; height: 26px;
    border-radius: 50%;
    background: white;
    border: 1.5px solid #ccc;
    display: flex; align-items: center; justify-content: center;
    font-size: .78rem;
    font-weight: 700;
    flex-shrink: 0;
    transition: background .2s, border-color .2s, color .2s;
  }
  .selected-correct .opt-letter { background: var(--correct); border-color: var(--correct); color: white; }
  .selected-wrong   .opt-letter { background: var(--wrong);   border-color: var(--wrong);   color: white; }
  .show-correct     .opt-letter { background: var(--correct); border-color: var(--correct); color: white; }

  .feedback {
    margin-top: 16px;
    padding: 12px 16px;
    border-radius: 8px;
    font-size: .88rem;
    line-height: 1.5;
    display: none;
  }
  .feedback.show { display: block; }
  .feedback.correct-fb { background: var(--correct-bg); color: var(--correct); }
  .feedback.wrong-fb   { background: var(--wrong-bg);   color: var(--wrong); }

  /* â”€â”€ SUBMIT + RESULTS â”€â”€ */
  .test-footer {
    text-align: center;
    margin-top: 36px;
  }

  .btn-submit {
    background: linear-gradient(135deg, var(--gold) 0%, #e0a830 100%);
    color: var(--navy);
    border: none;
    padding: 16px 48px;
    border-radius: 10px;
    font-family: 'DM Sans', sans-serif;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    letter-spacing: .5px;
    transition: transform .15s, box-shadow .2s;
    box-shadow: 0 4px 20px rgba(201,151,58,.4);
  }
  .btn-submit:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 8px 28px rgba(201,151,58,.5); }
  .btn-submit:disabled { opacity: .5; cursor: default; }

  .results-card {
    background: white;
    border-radius: 16px;
    padding: 48px 36px;
    text-align: center;
    box-shadow: 0 4px 32px rgba(0,0,0,.1);
    display: none;
    margin-top: 32px;
    animation: fadeUp .5s ease both;
  }
  .results-card.show { display: block; }

  .score-ring {
    width: 120px; height: 120px;
    border-radius: 50%;
    border: 6px solid var(--gold);
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    margin: 0 auto 24px;
    background: #fdf9f1;
  }
  .score-big { font-family: 'Playfair Display', serif; font-size: 2.4rem; font-weight: 900; color: var(--navy); line-height: 1; }
  .score-denom { font-size: .8rem; color: var(--muted); }

  .results-card h2 { font-family: 'Playfair Display', serif; font-size: 1.6rem; color: var(--navy); margin-bottom: 10px; }
  .results-card p { color: var(--muted); font-size: .95rem; line-height: 1.6; max-width: 400px; margin: 0 auto 28px; }

  .btn-retry {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: var(--navy);
    color: white;
    border: none;
    padding: 13px 28px;
    border-radius: 8px;
    font-family: 'DM Sans', sans-serif;
    font-size: .9rem;
    font-weight: 600;
    cursor: pointer;
    transition: background .2s;
  }
  .btn-retry:hover { background: var(--royal); }

  /* â”€â”€ FOOTER â”€â”€ */
  footer {
    background: var(--navy);
    color: rgba(255,255,255,.5);
    text-align: center;
    font-size: .82rem;
    padding: 28px 24px;
  }
  footer strong { color: var(--gold-light); }
</style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="logo">Eleven<span>Plus</span> Academy</div>
  <div class="header-badge">MVP Preview</div>
</header>

<!-- HERO -->
<div class="hero">
  <div class="hero-tag">UK 11+ Exam Preparation</div>
  <h1>Prepare Smarter.<br><em>Score Higher.</em></h1>
  <p>Practice with expertly crafted mock tests covering Maths, English, Verbal & Non-Verbal Reasoning â€” exactly what top grammar schools expect.</p>
  <div class="hero-stats">
    <div class="stat"><div class="stat-num">10</div><div class="stat-label">Questions</div></div>
    <div class="stat"><div class="stat-num">4</div><div class="stat-label">Subjects</div></div>
    <div class="stat"><div class="stat-num">PDF</div><div class="stat-label">Download</div></div>
  </div>
</div>

<!-- MAIN -->
<div class="main">

  <div class="section-header">
    <div class="section-title">
      <span>Mock Test Â· Set A</span>
      Mixed 11+ Practice Paper
    </div>
    <button class="btn-download" onclick="downloadPDF()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
        <polyline points="7 10 12 15 17 10"/>
        <line x1="12" y1="15" x2="12" y2="3"/>
      </svg>
      Download PDF
    </button>
  </div>

  <div class="progress-label" id="progressLabel">Question 0 of 10 answered</div>
  <div class="progress-bar-wrap">
    <div class="progress-bar-fill" id="progressBar" style="width:0%"></div>
  </div>

  <!-- Questions injected here -->
  <div id="questionsContainer"></div>

  <div class="test-footer">
    <button class="btn-submit" id="submitBtn" onclick="submitTest()" disabled>Submit Test</button>
  </div>

  <div class="results-card" id="resultsCard">
    <div class="score-ring">
      <div class="score-big" id="scoreNum">0</div>
      <div class="score-denom">/ 10</div>
    </div>
    <h2 id="resultsTitle">Well Done!</h2>
    <p id="resultsMsg">Review your answers above to see detailed feedback for each question.</p>
    <button class="btn-retry" onclick="retryTest()">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
      Retry Test
    </button>
  </div>

</div>

<!-- FOOTER -->
<footer>
  <strong>ElevenPlus Academy</strong> Â· MVP Demo Â· All questions are for practice purposes only. Â© 2025
</footer>

<script>
const questions = [
  {
    category: "Mathematics",
    text: "A train travels 240 km in 3 hours. What is its average speed in km/h?",
    options: ["60 km/h", "80 km/h", "90 km/h", "75 km/h"],
    answer: 1,
    explanation: "Speed = Distance Ã· Time = 240 Ã· 3 = 80 km/h."
  },
  {
    category: "English â€“ Vocabulary",
    text: "Choose the word most similar in meaning to 'BENEVOLENT'.",
    options: ["Cruel", "Generous", "Timid", "Arrogant"],
    answer: 1,
    explanation: "'Benevolent' means well-meaning and kindly â€” closest to 'Generous'."
  },
  {
    category: "Verbal Reasoning",
    text: "If CAT â†’ FDW (each letter shifted +3), what does DOG become?",
    options: ["GRJ", "GRK", "GPJ", "GQJ"],
    answer: 0,
    explanation: "Dâ†’G, Oâ†’R, Gâ†’J. Shifting each letter +3 gives GRJ."
  },
  {
    category: "Mathematics",
    text: "What is 15% of 320?",
    options: ["42", "48", "52", "56"],
    answer: 1,
    explanation: "10% of 320 = 32; 5% = 16; total = 32 + 16 = 48."
  },
  {
    category: "Non-Verbal Reasoning",
    text: "A square has a perimeter of 36 cm. What is its area?",
    options: ["72 cmÂ²", "81 cmÂ²", "64 cmÂ²", "90 cmÂ²"],
    answer: 1,
    explanation: "Side = 36 Ã· 4 = 9 cm. Area = 9 Ã— 9 = 81 cmÂ²."
  },
  {
    category: "English â€“ Comprehension",
    text: "Which sentence uses a simile correctly?",
    options: [
      "The moon is a lantern in the sky.",
      "She ran like the wind across the field.",
      "The stars are dancing overhead.",
      "He was a lion in the battle."
    ],
    answer: 1,
    explanation: "A simile uses 'like' or 'as' to make a comparison. 'Like the wind' is a simile."
  },
  {
    category: "Mathematics",
    text: "What is the next number in the sequence: 3, 6, 12, 24, ___?",
    options: ["36", "42", "48", "30"],
    answer: 2,
    explanation: "Each number is multiplied by 2: 24 Ã— 2 = 48."
  },
  {
    category: "Verbal Reasoning",
    text: "Which word is the odd one out? Apple, Pear, Carrot, Grape",
    options: ["Apple", "Pear", "Carrot", "Grape"],
    answer: 2,
    explanation: "Apple, Pear, and Grape are all fruits. Carrot is a vegetable."
  },
  {
    category: "Mathematics",
    text: "A rectangle has a length of 12 cm and a width of 7 cm. What is its area?",
    options: ["38 cmÂ²", "76 cmÂ²", "84 cmÂ²", "96 cmÂ²"],
    answer: 2,
    explanation: "Area = Length Ã— Width = 12 Ã— 7 = 84 cmÂ²."
  },
  {
    category: "English â€“ Grammar",
    text: "Choose the correctly punctuated sentence.",
    options: [
      "Its a lovely day, isnt it.",
      "It's a lovely day, isn't it?",
      "Its a lovely day isn't it?",
      "It's a lovely day isn't it."
    ],
    answer: 1,
    explanation: "'It's' needs an apostrophe (contraction of 'it is'), and 'isn't' also needs one. The question ends with a question mark."
  }
];

const letters = ['A','B','C','D'];
let answered = new Array(10).fill(null);

function renderQuestions() {
  const container = document.getElementById('questionsContainer');
  container.innerHTML = '';
  questions.forEach((q, qi) => {
    const card = document.createElement('div');
    card.className = 'question-card';
    card.id = `card-${qi}`;
    card.style.animationDelay = `${qi * 0.05}s`;

    card.innerHTML = `
      <div class="q-header">
        <div class="q-num">${qi+1}</div>
        <div>
          <div class="q-category">${q.category}</div>
          <div class="q-text">${q.text}</div>
        </div>
      </div>
      <div class="options" id="opts-${qi}">
        ${q.options.map((opt, oi) => `
          <div class="option" id="opt-${qi}-${oi}" onclick="selectAnswer(${qi},${oi})">
            <div class="opt-letter">${letters[oi]}</div>
            <span>${opt}</span>
          </div>
        `).join('')}
      </div>
      <div class="feedback" id="fb-${qi}"></div>
    `;
    container.appendChild(card);
  });
}

function selectAnswer(qi, oi) {
  if (answered[qi] !== null) return; // already answered
  answered[qi] = oi;

  const q = questions[qi];
  const isCorrect = oi === q.answer;
  const card = document.getElementById(`card-${qi}`);
  card.classList.add(isCorrect ? 'answered-correct' : 'answered-wrong');

  for (let i = 0; i < q.options.length; i++) {
    const optEl = document.getElementById(`opt-${qi}-${i}`);
    optEl.classList.add('disabled');
    if (i === oi) optEl.classList.add(isCorrect ? 'selected-correct' : 'selected-wrong');
    if (!isCorrect && i === q.answer) optEl.classList.add('show-correct');
  }

  const fb = document.getElementById(`fb-${qi}`);
  fb.className = `feedback show ${isCorrect ? 'correct-fb' : 'wrong-fb'}`;
  fb.innerHTML = `<strong>${isCorrect ? 'âœ“ Correct!' : 'âœ— Incorrect.'}</strong> ${q.explanation}`;

  updateProgress();
}

function updateProgress() {
  const count = answered.filter(a => a !== null).length;
  document.getElementById('progressLabel').textContent = `Question ${count} of 10 answered`;
  document.getElementById('progressBar').style.width = `${count * 10}%`;
  document.getElementById('submitBtn').disabled = count < 10;
}

function submitTest() {
  const score = answered.reduce((acc, a, i) => acc + (a === questions[i].answer ? 1 : 0), 0);
  const pct = score / 10;

  document.getElementById('scoreNum').textContent = score;

  let title, msg;
  if (pct === 1)       { title = 'ðŸ† Perfect Score!';        msg = 'Outstanding! You answered every question correctly. Exceptional 11+ preparation!'; }
  else if (pct >= .8)  { title = 'ðŸŒŸ Excellent Work!';       msg = `You scored ${score}/10. A fantastic result! Focus on the questions you missed to reach a perfect score.`; }
  else if (pct >= .6)  { title = 'ðŸ‘ Good Effort!';          msg = `You scored ${score}/10. Good progress! Review your incorrect answers and keep practising daily.`; }
  else                  { title = 'ðŸ“š Keep Practising!';     msg = `You scored ${score}/10. Don't be discouraged â€” review each explanation carefully and try again.`; }

  document.getElementById('resultsTitle').textContent = title;
  document.getElementById('resultsMsg').textContent = msg;

  const card = document.getElementById('resultsCard');
  card.classList.add('show');
  card.scrollIntoView({ behavior: 'smooth', block: 'start' });

  document.getElementById('submitBtn').disabled = true;
}

function retryTest() {
  answered = new Array(10).fill(null);
  document.getElementById('resultsCard').classList.remove('show');
  document.getElementById('submitBtn').disabled = true;
  renderQuestions();
  updateProgress();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

// â”€â”€ PDF GENERATION â”€â”€
function downloadPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF({ unit: 'mm', format: 'a4' });

  const navy = [13, 31, 60];
  const gold = [201, 151, 58];
  const cream = [250, 248, 243];
  const black = [28, 26, 22];
  const grey = [120, 112, 100];
  const W = 210, margin = 20;

  // Header band
  doc.setFillColor(...navy);
  doc.rect(0, 0, W, 32, 'F');
  doc.setFillColor(...gold);
  doc.rect(0, 32, W, 2, 'F');

  doc.setTextColor(240, 201, 110);
  doc.setFontSize(18);
  doc.setFont('helvetica', 'bold');
  doc.text('ElevenPlus Academy', margin, 14);
  doc.setFontSize(10);
  doc.setTextColor(200, 195, 185);
  doc.setFont('helvetica', 'normal');
  doc.text('UK 11+ Exam Preparation Â· Mock Test Set A', margin, 22);

  doc.setTextColor(...black);
  doc.setFontSize(9);
  doc.text(`Generated: ${new Date().toLocaleDateString('en-GB', {day:'numeric',month:'long',year:'numeric'})}`, W - margin, 22, { align: 'right' });

  // Subtitle
  doc.setFontSize(14);
  doc.setFont('helvetica', 'bold');
  doc.setTextColor(...navy);
  doc.text('Mixed Practice Paper â€” 10 Questions', margin, 46);
  doc.setFontSize(9);
  doc.setFont('helvetica', 'normal');
  doc.setTextColor(...grey);
  doc.text('Subjects covered: Mathematics Â· English Â· Verbal Reasoning Â· Non-Verbal Reasoning', margin, 53);

  // Divider
  doc.setDrawColor(...gold);
  doc.setLineWidth(0.5);
  doc.line(margin, 57, W - margin, 57);

  let y = 66;

  questions.forEach((q, i) => {
    const numLines = Math.ceil(q.text.length / 85);
    const blockHeight = 14 + numLines * 6 + q.options.length * 7 + 6;

    if (y + blockHeight > 275) { doc.addPage(); y = 20; }

    // Question number pill
    doc.setFillColor(...navy);
    doc.roundedRect(margin, y - 5, 8, 8, 2, 2, 'F');
    doc.setTextColor(255, 255, 255);
    doc.setFontSize(8);
    doc.setFont('helvetica', 'bold');
    doc.text(`${i+1}`, margin + 4, y + 1, { align: 'center' });

    // Category
    doc.setTextColor(...gold);
    doc.setFontSize(7.5);
    doc.setFont('helvetica', 'bold');
    doc.text(q.category.toUpperCase(), margin + 11, y - 1);

    // Question text
    doc.setTextColor(...black);
    doc.setFontSize(10);
    doc.setFont('helvetica', 'normal');
    const lines = doc.splitTextToSize(q.text, W - margin * 2 - 11);
    doc.text(lines, margin + 11, y + 5);
    y += 5 + lines.length * 6;

    // Options
    q.options.forEach((opt, oi) => {
      doc.setFillColor(...cream);
      doc.roundedRect(margin + 11, y - 0.5, W - margin * 2 - 11, 6.5, 1.5, 1.5, 'F');
      doc.setDrawColor(220, 214, 200);
      doc.setLineWidth(0.3);
      doc.roundedRect(margin + 11, y - 0.5, W - margin * 2 - 11, 6.5, 1.5, 1.5, 'S');

      doc.setFillColor(...navy);
      doc.circle(margin + 17, y + 2.5, 2.5, 'F');
      doc.setTextColor(255,255,255);
      doc.setFontSize(7);
      doc.setFont('helvetica', 'bold');
      doc.text(letters[oi], margin + 17, y + 4.2, { align: 'center' });

      doc.setTextColor(...black);
      doc.setFontSize(9);
      doc.setFont('helvetica', 'normal');
      doc.text(opt, margin + 22, y + 4);
      y += 8;
    });

    y += 6;
  });

  // Answer Key page
  doc.addPage();
  doc.setFillColor(...navy);
  doc.rect(0, 0, W, 24, 'F');
  doc.setTextColor(240, 201, 110);
  doc.setFontSize(14);
  doc.setFont('helvetica', 'bold');
  doc.text('Answer Key & Explanations', margin, 16);
  doc.setFillColor(...gold);
  doc.rect(0, 24, W, 1.5, 'F');

  y = 36;
  questions.forEach((q, i) => {
    if (y > 265) { doc.addPage(); y = 20; }
    doc.setFillColor(oi => q.answer === oi ? [45,122,79] : cream);

    // Answer number
    doc.setFillColor(...navy);
    doc.roundedRect(margin, y - 4, 7, 7, 1.5, 1.5, 'F');
    doc.setTextColor(255,255,255);
    doc.setFontSize(8);
    doc.setFont('helvetica','bold');
    doc.text(`${i+1}`, margin + 3.5, y + 1, {align:'center'});

    // Correct answer pill
    const ca = q.options[q.answer];
    doc.setFillColor(45, 122, 79);
    doc.roundedRect(margin + 10, y - 4, 5 + ca.length * 1.6, 7, 2, 2, 'F');
    doc.setTextColor(255,255,255);
    doc.setFontSize(7.5);
    doc.setFont('helvetica','bold');
    doc.text(`${letters[q.answer]}  ${ca}`, margin + 13, y + 1);

    // Explanation
    doc.setTextColor(...grey);
    doc.setFontSize(8.5);
    doc.setFont('helvetica','normal');
    const expLines = doc.splitTextToSize(q.explanation, W - margin * 2 - 10);
    doc.text(expLines, margin + 10, y + 10);
    y += 14 + expLines.length * 5;
  });

  // Footer on all pages
  const total = doc.getNumberOfPages();
  for (let p = 1; p <= total; p++) {
    doc.setPage(p);
    doc.setFillColor(...navy);
    doc.rect(0, 289, W, 8, 'F');
    doc.setTextColor(180, 170, 155);
    doc.setFontSize(7.5);
    doc.setFont('helvetica','normal');
    doc.text('ElevenPlus Academy Â· Mock Test Set A Â· For practice use only', margin, 294);
    doc.text(`Page ${p} of ${total}`, W - margin, 294, { align: 'right' });
  }

  doc.save('11plus-mock-test-set-a.pdf');
}

// Load jsPDF from CDN then render
(function loadJsPDF() {
  const s = document.createElement('script');
  s.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';
  s.onload = () => console.log('jsPDF ready');
  document.head.appendChild(s);
})();

renderQuestions();
updateProgress();
</script>
</body>
</html>
